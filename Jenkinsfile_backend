pipeline{
    agent any

    environment {
        DOTNET_ROOT = "/usr/local/share/dotnet/"
        PATH = "/usr/local/share/dotnet/:$PATH"
    }

    triggers{
        pollSCM("* * * * *")
    }
    
    stages{
        stage("unitTest"){
            steps{
                echo "====++++executing dotnet test ++++===="
                // dir('SomeWhereCinema.Backend/Test.Domain.Core/'){
                //     sh "dotnet test"
                // }
            }
        }
         stage("Build"){
            steps{
                // dir('SomeWhereCinema.Backend'){
                //     sh "dotnet build"
                // }
            }
            post{
                always{
                    echo "====++++ the first build stage ++++===="
                }
                success{
                    echo "=== Build are success"
                }
                failure{
                    echo "=== Build failure"
                }
        
            }
        }
        stage("merge branch"){
            steps{
                sh "git checkout BackEnd_Dev"
                sh "git fetch --all"
                sh "git checkout BackEnd"
                sh "git pull"
                sh "git rebase BackEnd_Dev"
                sh "git push"
            }
        }
    }
}
